<!DOCTYPE html>
        body: JSON.stringify({
          name,
          quantity: +$('#invQty').value || 1,
          expiration: $('#invExp').value || null
        })
      });
      $('#invName').value = ''; $('#invQty').value = 1; $('#invExp').value = '';
      loadInventory();
    };

    $('#addShopping').onclick = async () => {
      const name = $('#shopItem').value.trim();
      if (!name) return;
      await api('/api/shopping', {
        method: 'POST',
        body: JSON.stringify({ itemName: name })
      });
      $('#shopItem').value = '';
      loadShopping();
    };

    // === TABS ===
    document.querySelectorAll('.tab-btn').forEach(btn => {
      btn.onclick = () => showTab(btn.dataset.tab);
    });

    // === SCANNER ===
    let scanner;
    $('#startScan').onclick = () => {
      if (scanner) {
        scanner.reset();
        scanner = null;
        $('#startScan').textContent = 'Start Scanner';
        return;
      }
      scanner = new ZXing.BrowserMultiFormatReader();
      scanner.decodeFromVideoDevice(null, 'video', result => {<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>PantryPal Pro</title>
  <link rel="manifest" href="/manifest.json">
  <script src="https://www.gstatic.com/firebasejs/10.12.5/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.5/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.5/firebase-messaging-compat.js"></script>
  <script src="https://unpkg.com/@zxing/browser@latest"></script>
  <script src="https://cdn.jsdelivr.net/npm/annyang@2.6.1/annyang.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&display=swap" rel="stylesheet"/>
  <style>
    body { font-family: 'Inter', sans-serif; }
    .glass { background: rgba(255,255,255,0.15); backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,0.2); }
    .dark .glass { background: rgba(0,0,0,0.5); border: 1px solid rgba(255,255,255,0.1); color: white; }
    .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%); animation: gradient 15s ease infinite; }
    @keyframes gradient { 0%,100%{background-position:0% 50%} 50%{background-position:100% 50%} }
    .dark .gradient-bg { background: #0a0118; }
    .btn-glow { box-shadow: 0 0 20px rgba(139,92,246,0.5); transition: all 0.3s; }
    .btn-glow:hover { box-shadow: 0 0 30px rgba(139,92,246,0.8); transform: translateY(-2px); }
    .tab-active { background: rgba(255,255,255,0.2); color: white; }
    .exp-soon { background: #f59e0b; color: black; }
    .exp-today { background: #ef4444; color: white; animation: pulse 2s infinite; }
    @keyframes pulse { 0%,100% { opacity: 1; } 50% { opacity: 0.7; } }
    .spinner { border: 4px solid #ffffff40; border-top: 4px solid white; border-radius: 50%; width: 24px; height: 24px; animation: spin 1s linear infinite; }
    @keyframes spin { to { transform: rotate(360deg); } }
    .install-btn { position: fixed; bottom: 20px; right: 20px; z-index: 9999; }
    .pro-badge { background: linear-gradient(90deg, #10b981, #059669); color: white; }
  </style>
</head>
<body class="min-h-screen gradient-bg text-gray-900 dark:text-white transition-colors duration-500">


        if (result) {
          $('#invName').value = result.text;
          showTab('inventory');
          setTimeout(() => $('#addItem').click(), 500);
        }
      });
      $('#startScan').textContent = 'Stop Scanner';
    };

    // === DARK MODE ===
    $('#darkModeBtn').onclick = () => document.documentElement.classList.toggle('dark');

    // === VOICE (basic) ===
    if (annyang) {
      annyang.addCommand('add *item', item => {
        $('#shopItem').value = item;
        $('#addShopping').click();
      });
      $('#voiceBtn').onclick = () => annyang.start();
    }
  </script>
</body>
</html>
